Math.randomString=function(o){for(var i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;o>s;s++)i+=n.charAt(Math.floor(Math.random()*n.length));return i};var Lobibox=Lobibox||{};!function(){var o=function(o,i){this.$type=null,this.$options=null,this.$el=null;var n=this,s=function(o){return("mini"===o.size||"large"===o.size)&&(o=$.extend({},Lobibox.notify.OPTIONS[o.size],o)),o=$.extend({},Lobibox.notify.OPTIONS[n.$type],Lobibox.notify.DEFAULTS,o),"mini"!==o.size&&o.title===!0?o.title=Lobibox.notify.OPTIONS[n.$type].title:"mini"===o.size&&o.title===!0&&(o.title=!1),o.icon===!0&&(o.icon=Lobibox.notify.OPTIONS.icons[o.iconSource][n.$type]),o.sound===!0&&(o.sound=Lobibox.notify.OPTIONS[n.$type].sound),o.sound&&(o.sound=o.soundPath+o.sound+o.soundExt),o},t=function(){var o=c();if("mini"===n.$options.size&&o.addClass("notify-mini"),"string"==typeof n.$options.position){var i=d();e(o,i),i.hasClass("center")&&i.css("margin-left","-"+i.width()/2+"px")}else $("body").append(o),o.css({position:"fixed",left:n.$options.position.left,top:n.$options.position.top});if(n.$el=o,n.$options.sound){var s=new Audio(n.$options.sound);s.play()}n.$options.rounded&&n.$el.addClass("rounded")},e=function(o,i){if("normal"===n.$options.size)i.hasClass("bottom")?i.prepend(o):i.append(o);else if("mini"===n.$options.size)i.hasClass("bottom")?i.prepend(o):i.append(o);else if("large"===n.$options.size){var s=r().append(o),t=l(s.attr("id"));i.find(".lb-notify-wrapper").append(s),i.find(".lb-notify-tabs").append(t),a(t),t.find(">a").click(function(){a(t)})}},a=function(o){o.closest(".lb-notify-tabs").find(">li").removeClass("active"),o.addClass("active");var i=$(o.find(">a").attr("href"));i.closest(".lb-notify-wrapper").find(">.lb-tab-pane").removeClass("active"),i.addClass("active")},l=function(o){var i=$("<li></li>",{"class":Lobibox.notify.OPTIONS[n.$type]["class"]});return $("<a></a>",{href:"#"+o}).append('<i class="tab-control-icon '+n.$options.icon+'"></i>').appendTo(i),i},r=function(){return $("<div></div>",{"class":"lb-tab-pane",id:Math.randomString(10)})},d=function(){var o,i=("large"===n.$options.size?".lobibox-notify-wrapper-large":".lobibox-notify-wrapper")+"."+n.$options.position.replace(/\s/gi,".");return o=$(i),0===o.length&&(o=$("<div></div>").addClass(i.replace(/\./g," ").trim()).appendTo($("body")),"large"===n.$options.size&&o.append($('<ul class="lb-notify-tabs"></ul>')).append($('<div class="lb-notify-wrapper"></div>'))),o},c=function(){var o,i,s,t,e,a=Lobibox.notify.OPTIONS,l=$("<div></div>",{"class":"lobibox-notify "+a[n.$type]["class"]+" "+a["class"]+" "+n.$options.showClass});return s=$('<div class="lobibox-notify-icon-wrapper"></div>').appendTo(l),o=$('<div class="lobibox-notify-icon"></div>').appendTo(s),i=$("<div></div>").appendTo(o),n.$options.img?i.append('<img src="'+n.$options.img+'"/>'):n.$options.icon?i.append('<div class="icon-el"><i class="'+n.$options.icon+'"></i></div>'):l.addClass("without-icon"),e=$('<div class="lobibox-notify-msg">'+n.$options.msg+"</div>"),n.$options.messageHeight!==!1&&e.css("max-height",n.$options.messageHeight),t=$("<div></div>",{"class":"lobibox-notify-body"}).append(e).appendTo(l),n.$options.title&&t.prepend('<div class="lobibox-notify-title">'+n.$options.title+"<div>"),p(l),("normal"===n.$options.size||"mini"===n.$options.size)&&(f(l),b(l)),n.$options.width&&l.css("width",v(n.$options.width)),l},p=function(o){n.$options.closable&&$('<span class="lobibox-close">&times;</span>').click(function(){n.remove()}).appendTo(o)},f=function(o){n.$options.closeOnClick&&o.click(function(){n.remove()})},b=function(o){if(n.$options.delay){if(n.$options.delayIndicator){var i=$('<div class="lobibox-delay-indicator"><div></div></div>');o.append(i)}var s=0,t=1e3/30,e=setInterval(function(){s+=t;var o=100*s/n.$options.delay;o>=100&&(o=100,n.remove(),e=clearInterval(e)),n.$options.delayIndicator&&i.find("div").css("width",o+"%")},t);n.$options.pauseDelayOnHover&&o.on("mouseenter.lobibox",function(){t=0}).on("mouseleave.lobibox",function(){t=1e3/30})}},u=function(o){var i=o.prev();return 0===i.length&&(i=o.next()),0===i.length?null:i},v=function(o){return o=Math.min($(window).outerWidth(),o)};this.remove=function(){n.$el.removeClass(n.$options.showClass).addClass(n.$options.hideClass);var o=n.$el.parent(),i=o.closest(".lobibox-notify-wrapper-large"),s="#"+o.attr("id"),t=i.find('>.lb-notify-tabs>li:has(a[href="'+s+'"])');return t.addClass(Lobibox.notify.OPTIONS["class"]).addClass(n.$options.hideClass),setTimeout(function(){if("normal"===n.$options.size||"mini"===n.$options.size)n.$el.remove();else if("large"===n.$options.size){var i=u(t);i&&a(i),t.remove(),o.remove()}},500),n},this.$type=o,this.$options=s(i),t()};Lobibox.notify=function(i,n){if(["default","info","warning","error","success"].indexOf(i)>-1){var s=new o(i,n);return s.$el.data("lobibox",s),s}},Lobibox.notify.closeAll=function(){var o=$(".lobibox-notify");o.each(function(o,i){$(i).data("lobibox").remove()})},Lobibox.notify.DEFAULTS={title:!0,size:"normal",soundPath:"sounds/",soundExt:".ogg",showClass:"fadeInDown",hideClass:"zoomOut",icon:!0,msg:"",img:null,closable:!0,hideCloseButton:!1,delay:5e3,delayIndicator:!0,closeOnClick:!0,width:400,sound:!0,position:"bottom right",iconSource:"bootstrap",rounded:!1,messageHeight:60,pauseDelayOnHover:!0},Lobibox.notify.OPTIONS={"class":"animated-fast",large:{width:500,messageHeight:96},mini:{"class":"notify-mini",messageHeight:32},"default":{"class":"lobibox-notify-default",title:"Default",sound:!1},success:{"class":"lobibox-notify-success",title:"Success",sound:"sound2"},error:{"class":"lobibox-notify-error",title:"Error",sound:"sound4"},warning:{"class":"lobibox-notify-warning",title:"Warning",sound:"sound5"},info:{"class":"lobibox-notify-info",title:"Information",sound:"sound6"},icons:{bootstrap:{success:"icon-ok",error:"icon-cross",warning:"icon-info",info:"icon-info"},fontAwesome:{success:"fa fa-check-circle",error:"fa fa-times-circle",warning:"fa fa-exclamation-circle",info:"fa fa-info-circle"}}}}();